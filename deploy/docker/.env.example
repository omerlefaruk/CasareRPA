# CasareRPA Docker Configuration
# =============================================================================
# Docker-specific configuration for containerized deployments.
# For general configuration options, see: .env.template (project root)
#
# Copy this file to .env and update values for your environment
#
# PROFILES:
#   dev       - Development stack (db, redis, orchestrator, pgadmin)
#   prod      - Production stack (db, redis, orchestrator, robot-pool)
#   full      - Full stack (all services including monitoring)
#   monitoring - Prometheus + Grafana only
#   tools     - Development tools (pgadmin, redis-commander)
#
# USAGE:
#   cp .env.example .env
#   # Edit .env with your values
#   docker compose --profile dev up -d
# =============================================================================

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
POSTGRES_DB=casare_rpa
POSTGRES_USER=casare
POSTGRES_PASSWORD=changeme_in_production

# Host port mapping (internal always 5432)
DB_HOST_PORT=5433

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================
# Host port mapping (internal always 6379)
REDIS_HOST_PORT=6380

# =============================================================================
# ORCHESTRATOR CONFIGURATION
# =============================================================================
# Host port mapping (internal always 8000)
ORCHESTRATOR_HOST_PORT=8001

# Number of uvicorn workers (1 recommended for WebSocket services)
ORCHESTRATOR_WORKERS=4

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================
# JWT secret for authentication
# Generate with: openssl rand -hex 32
JWT_SECRET_KEY=your-secure-jwt-secret-key-change-in-production

# Enable JWT dev mode (allows any token in development)
JWT_DEV_MODE=false

# API secret for admin operations
# Generate with: openssl rand -hex 32
API_SECRET=

# Robot API key (for robot authentication)
ROBOT_API_KEY=

# =============================================================================
# CORS CONFIGURATION
# =============================================================================
# Comma-separated list of allowed origins
# Use "*" for development, specific origins for production
CORS_ORIGINS=*

# =============================================================================
# APPLICATION CONFIGURATION
# =============================================================================
CASARE_ENV=production
CASARE_LOG_LEVEL=INFO
TZ=UTC

# =============================================================================
# TIMEOUT CONFIGURATION
# =============================================================================
# Robot heartbeat timeout in seconds (mark offline after this)
ROBOT_HEARTBEAT_TIMEOUT=90

# Default job timeout in seconds (1 hour = 3600)
JOB_TIMEOUT_DEFAULT=3600

# WebSocket ping interval in seconds
WS_PING_INTERVAL=30

# =============================================================================
# ROBOT POOL CONFIGURATION
# =============================================================================
# Number of browser robot replicas
ROBOT_REPLICAS=2

# Number of headless robot replicas (Chromium only)
HEADLESS_ROBOT_REPLICAS=1

# =============================================================================
# MONITORING CONFIGURATION
# =============================================================================
# Prometheus host port (internal always 9090)
PROMETHEUS_HOST_PORT=9090

# Grafana host port (internal always 3000)
GRAFANA_HOST_PORT=3000
GRAFANA_USER=admin
GRAFANA_PASSWORD=admin
GRAFANA_ROOT_URL=http://localhost:3000

# =============================================================================
# DEVELOPMENT TOOLS
# =============================================================================
# pgAdmin (for --profile tools)
PGADMIN_HOST_PORT=5050
PGADMIN_EMAIL=admin@local.dev
PGADMIN_PASSWORD=admin

# Redis Commander (for --profile tools)
REDIS_COMMANDER_PORT=8081

# =============================================================================
# SUPABASE CONFIGURATION (Optional)
# =============================================================================
# For realtime presence sync between robots
# Get from: https://app.supabase.com/project/<project>/settings/api
SUPABASE_URL=
SUPABASE_KEY=

# =============================================================================
# CLOUD PLATFORM CONFIGURATION (Optional)
# =============================================================================
# These are used when deploying to Fly.io, Railway, or Render
# See deploy/platforms/README.md for details

# Fly.io region (iad, lax, fra, etc.)
# FLY_REGION=iad

# Railway environment
# RAILWAY_ENVIRONMENT=production

# Render region (oregon, ohio, frankfurt, singapore)
# RENDER_REGION=oregon

# =============================================================================
# BUILD CONFIGURATION
# =============================================================================
# Docker BuildKit (recommended)
DOCKER_BUILDKIT=1
COMPOSE_DOCKER_CLI_BUILD=1

# =============================================================================
# EXAMPLE: Production Configuration
# =============================================================================
# For production, uncomment and update these:
#
# POSTGRES_PASSWORD=<strong-password>
# JWT_SECRET_KEY=<generated-32-byte-hex>
# API_SECRET=<generated-32-byte-hex>
# CORS_ORIGINS=https://app.example.com,https://admin.example.com
# CASARE_ENV=production
# GRAFANA_PASSWORD=<strong-password>
# SUPABASE_URL=https://xxx.supabase.co
# SUPABASE_KEY=eyJ...
