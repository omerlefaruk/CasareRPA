{
  "$schema": "casare_rpa/workflow_template/1.0",
  "id": "tmpl_file_org_001",
  "metadata": {
    "name": "File Organization",
    "description": "Organizes files by moving, copying, or renaming them based on rules. Supports date-based folders, file type sorting, and custom naming patterns.",
    "category": "file_operations",
    "version": "1.0.0",
    "author": "CasareRPA",
    "tags": ["files", "organization", "sorting", "rename", "folders", "cleanup"],
    "created_at": "2024-11-28T00:00:00",
    "modified_at": "2024-11-28T00:00:00",
    "icon": "folder",
    "preview_image": "",
    "difficulty": "beginner",
    "estimated_duration": "1-10 minutes",
    "requirements": ["File system access"]
  },
  "parameters": [
    {
      "name": "source_folder",
      "display_name": "Source Folder",
      "description": "Folder containing files to organize",
      "param_type": "directory_path",
      "default_value": null,
      "required": true,
      "constraints": {},
      "group": "Source",
      "order": 0
    },
    {
      "name": "file_pattern",
      "display_name": "File Pattern",
      "description": "Glob pattern to match files (e.g., *.pdf, *.jpg)",
      "param_type": "string",
      "default_value": "*",
      "required": false,
      "constraints": {},
      "group": "Source",
      "order": 1
    },
    {
      "name": "include_subfolders",
      "display_name": "Include Subfolders",
      "description": "Process files in subfolders",
      "param_type": "boolean",
      "default_value": false,
      "required": false,
      "constraints": {},
      "group": "Source",
      "order": 2
    },
    {
      "name": "destination_folder",
      "display_name": "Destination Folder",
      "description": "Base folder for organized files",
      "param_type": "directory_path",
      "default_value": null,
      "required": true,
      "constraints": {},
      "group": "Destination",
      "order": 3
    },
    {
      "name": "organization_mode",
      "display_name": "Organization Mode",
      "description": "How to organize files",
      "param_type": "choice",
      "default_value": "by_extension",
      "required": false,
      "constraints": {"choices": ["by_extension", "by_date", "by_size", "by_name_prefix", "custom"]},
      "group": "Organization",
      "order": 4
    },
    {
      "name": "date_format",
      "display_name": "Date Folder Format",
      "description": "Format for date-based folders (e.g., YYYY/MM, YYYY-MM-DD)",
      "param_type": "string",
      "default_value": "YYYY/MM",
      "required": false,
      "constraints": {},
      "group": "Organization",
      "order": 5
    },
    {
      "name": "custom_rules",
      "display_name": "Custom Rules",
      "description": "JSON rules for custom organization: [{pattern: '*.pdf', folder: 'Documents'}]",
      "param_type": "json",
      "default_value": [],
      "required": false,
      "constraints": {},
      "group": "Organization",
      "order": 6
    },
    {
      "name": "action",
      "display_name": "File Action",
      "description": "What to do with matched files",
      "param_type": "choice",
      "default_value": "move",
      "required": false,
      "constraints": {"choices": ["move", "copy"]},
      "group": "Action",
      "order": 7
    },
    {
      "name": "rename_pattern",
      "display_name": "Rename Pattern",
      "description": "Pattern for renaming files (empty = keep original name)",
      "param_type": "string",
      "default_value": "",
      "required": false,
      "constraints": {},
      "group": "Action",
      "order": 8
    },
    {
      "name": "conflict_resolution",
      "display_name": "Conflict Resolution",
      "description": "How to handle duplicate filenames",
      "param_type": "choice",
      "default_value": "rename",
      "required": false,
      "constraints": {"choices": ["skip", "overwrite", "rename"]},
      "group": "Options",
      "order": 9
    },
    {
      "name": "create_log",
      "display_name": "Create Log File",
      "description": "Create a log of all file operations",
      "param_type": "boolean",
      "default_value": true,
      "required": false,
      "constraints": {},
      "group": "Options",
      "order": 10
    },
    {
      "name": "dry_run",
      "display_name": "Dry Run",
      "description": "Preview changes without making them",
      "param_type": "boolean",
      "default_value": false,
      "required": false,
      "constraints": {},
      "group": "Options",
      "order": 11
    }
  ],
  "workflow_definition": {
    "metadata": {
      "name": "File Organization Workflow",
      "description": "Generated from File Organization template",
      "version": "1.0.0"
    },
    "nodes": {
      "start_001": {
        "node_id": "start_001",
        "node_type": "StartNode",
        "name": "Start",
        "position": [100, 200],
        "config": {}
      },
      "list_files_001": {
        "node_id": "list_files_001",
        "node_type": "ListFilesNode",
        "name": "List Files",
        "position": [300, 200],
        "config": {
          "folder": "{{source_folder}}",
          "pattern": "{{file_pattern}}",
          "recursive": "{{include_subfolders}}"
        }
      },
      "log_count_001": {
        "node_id": "log_count_001",
        "node_type": "LogNode",
        "name": "Log File Count",
        "position": [500, 200],
        "config": {
          "message": "Found {{file_count}} files to organize"
        }
      },
      "loop_001": {
        "node_id": "loop_001",
        "node_type": "ForEachNode",
        "name": "Process Each File",
        "position": [700, 200],
        "config": {}
      },
      "get_info_001": {
        "node_id": "get_info_001",
        "node_type": "GetFileInfoNode",
        "name": "Get File Info",
        "position": [900, 200],
        "config": {}
      },
      "calc_dest_001": {
        "node_id": "calc_dest_001",
        "node_type": "CalculateDestinationNode",
        "name": "Calculate Destination",
        "position": [1100, 200],
        "config": {
          "base_folder": "{{destination_folder}}",
          "mode": "{{organization_mode}}",
          "date_format": "{{date_format}}",
          "custom_rules": "{{custom_rules}}"
        }
      },
      "branch_dry_001": {
        "node_id": "branch_dry_001",
        "node_type": "BranchNode",
        "name": "Dry Run?",
        "position": [1300, 200],
        "config": {
          "condition": "{{dry_run}}"
        }
      },
      "log_preview_001": {
        "node_id": "log_preview_001",
        "node_type": "LogNode",
        "name": "Log Preview",
        "position": [1500, 100],
        "config": {
          "message": "[DRY RUN] Would {{action}} {{file_name}} to {{dest_path}}"
        }
      },
      "create_folder_001": {
        "node_id": "create_folder_001",
        "node_type": "CreateFolderNode",
        "name": "Create Folder",
        "position": [1500, 300],
        "config": {
          "path": "{{dest_folder}}",
          "exist_ok": true
        }
      },
      "branch_action_001": {
        "node_id": "branch_action_001",
        "node_type": "BranchNode",
        "name": "Move or Copy?",
        "position": [1700, 300],
        "config": {
          "condition": "{{action}} == 'move'"
        }
      },
      "move_file_001": {
        "node_id": "move_file_001",
        "node_type": "MoveFileNode",
        "name": "Move File",
        "position": [1900, 200],
        "config": {
          "source": "{{current_file}}",
          "destination": "{{dest_path}}",
          "on_conflict": "{{conflict_resolution}}"
        }
      },
      "copy_file_001": {
        "node_id": "copy_file_001",
        "node_type": "CopyFileNode",
        "name": "Copy File",
        "position": [1900, 400],
        "config": {
          "source": "{{current_file}}",
          "destination": "{{dest_path}}",
          "on_conflict": "{{conflict_resolution}}"
        }
      },
      "branch_log_001": {
        "node_id": "branch_log_001",
        "node_type": "BranchNode",
        "name": "Log Changes?",
        "position": [2100, 300],
        "config": {
          "condition": "{{create_log}}"
        }
      },
      "append_log_001": {
        "node_id": "append_log_001",
        "node_type": "AppendFileNode",
        "name": "Append to Log",
        "position": [2300, 200],
        "config": {
          "file_path": "{{destination_folder}}/organization_log.txt",
          "content": "{{timestamp}}: {{action}} {{file_name}} -> {{dest_path}}\n"
        }
      },
      "increment_001": {
        "node_id": "increment_001",
        "node_type": "IncrementNode",
        "name": "Increment Counter",
        "position": [2500, 300],
        "config": {
          "variable_name": "processed_count"
        }
      },
      "log_summary_001": {
        "node_id": "log_summary_001",
        "node_type": "LogNode",
        "name": "Log Summary",
        "position": [2700, 200],
        "config": {
          "message": "Organization complete: {{processed_count}} files processed"
        }
      },
      "end_001": {
        "node_id": "end_001",
        "node_type": "EndNode",
        "name": "End",
        "position": [2900, 200],
        "config": {}
      }
    },
    "connections": [
      {"source_node": "start_001", "source_port": "exec_out", "target_node": "list_files_001", "target_port": "exec_in"},
      {"source_node": "list_files_001", "source_port": "exec_out", "target_node": "log_count_001", "target_port": "exec_in"},
      {"source_node": "list_files_001", "source_port": "files", "target_node": "loop_001", "target_port": "items"},
      {"source_node": "log_count_001", "source_port": "exec_out", "target_node": "loop_001", "target_port": "exec_in"},
      {"source_node": "loop_001", "source_port": "loop_body", "target_node": "get_info_001", "target_port": "exec_in"},
      {"source_node": "get_info_001", "source_port": "exec_out", "target_node": "calc_dest_001", "target_port": "exec_in"},
      {"source_node": "calc_dest_001", "source_port": "exec_out", "target_node": "branch_dry_001", "target_port": "exec_in"},
      {"source_node": "branch_dry_001", "source_port": "true", "target_node": "log_preview_001", "target_port": "exec_in"},
      {"source_node": "branch_dry_001", "source_port": "false", "target_node": "create_folder_001", "target_port": "exec_in"},
      {"source_node": "log_preview_001", "source_port": "exec_out", "target_node": "increment_001", "target_port": "exec_in"},
      {"source_node": "create_folder_001", "source_port": "exec_out", "target_node": "branch_action_001", "target_port": "exec_in"},
      {"source_node": "branch_action_001", "source_port": "true", "target_node": "move_file_001", "target_port": "exec_in"},
      {"source_node": "branch_action_001", "source_port": "false", "target_node": "copy_file_001", "target_port": "exec_in"},
      {"source_node": "move_file_001", "source_port": "exec_out", "target_node": "branch_log_001", "target_port": "exec_in"},
      {"source_node": "copy_file_001", "source_port": "exec_out", "target_node": "branch_log_001", "target_port": "exec_in"},
      {"source_node": "branch_log_001", "source_port": "true", "target_node": "append_log_001", "target_port": "exec_in"},
      {"source_node": "branch_log_001", "source_port": "false", "target_node": "increment_001", "target_port": "exec_in"},
      {"source_node": "append_log_001", "source_port": "exec_out", "target_node": "increment_001", "target_port": "exec_in"},
      {"source_node": "increment_001", "source_port": "exec_out", "target_node": "loop_001", "target_port": "loop_next"},
      {"source_node": "loop_001", "source_port": "exec_out", "target_node": "log_summary_001", "target_port": "exec_in"},
      {"source_node": "log_summary_001", "source_port": "exec_out", "target_node": "end_001", "target_port": "exec_in"}
    ],
    "frames": [],
    "variables": {
      "file_count": {
        "type": "Integer",
        "default_value": 0,
        "description": "Total files found"
      },
      "processed_count": {
        "type": "Integer",
        "default_value": 0,
        "description": "Files processed"
      },
      "current_file": {
        "type": "String",
        "default_value": "",
        "description": "Current file being processed"
      },
      "dest_path": {
        "type": "String",
        "default_value": "",
        "description": "Calculated destination path"
      }
    },
    "settings": {
      "stop_on_error": false,
      "timeout": 600,
      "retry_count": 0
    }
  },
  "usage_stats": {
    "total_uses": 0,
    "last_used": null,
    "successful_instantiations": 0,
    "failed_instantiations": 0,
    "average_rating": null,
    "rating_count": 0
  },
  "is_builtin": true,
  "source": "builtin",
  "marketplace_id": null
}
