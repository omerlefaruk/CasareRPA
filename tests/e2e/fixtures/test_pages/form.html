<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>E2E Test Form</title>
    <style>
        * {
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
        }
        body {
            max-width: 600px;
            margin: 40px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        h1 {
            color: #333;
            margin-bottom: 24px;
        }
        .form-group {
            margin-bottom: 16px;
        }
        label {
            display: block;
            margin-bottom: 4px;
            font-weight: 500;
            color: #555;
        }
        input[type="text"],
        input[type="email"],
        input[type="password"],
        select,
        textarea {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-size: 14px;
        }
        input:focus,
        select:focus,
        textarea:focus {
            outline: none;
            border-color: #007ACC;
            box-shadow: 0 0 0 2px rgba(0, 122, 204, 0.2);
        }
        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .checkbox-group input {
            width: auto;
        }
        button {
            background: #007ACC;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 4px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: background 0.2s;
        }
        button:hover {
            background: #005a9e;
        }
        button:disabled {
            background: #ccc;
            cursor: not-allowed;
        }
        .result {
            margin-top: 24px;
            padding: 16px;
            background: #e8f5e9;
            border: 1px solid #4caf50;
            border-radius: 4px;
            display: none;
        }
        .result.visible {
            display: block;
        }
        .result.error {
            background: #ffebee;
            border-color: #f44336;
        }
        .result h3 {
            margin: 0 0 8px 0;
            color: #2e7d32;
        }
        .result.error h3 {
            color: #c62828;
        }
        .result-data {
            font-family: monospace;
            white-space: pre-wrap;
            font-size: 12px;
            color: #333;
        }
        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <h1>E2E Test Form</h1>

    <form id="test-form">
        <!-- Name field -->
        <div class="form-group">
            <label for="name">Full Name</label>
            <input
                type="text"
                id="name"
                name="name"
                placeholder="Enter your name"
                required
                data-testid="name-input"
            >
        </div>

        <!-- Email field -->
        <div class="form-group">
            <label for="email">Email Address</label>
            <input
                type="email"
                id="email"
                name="email"
                placeholder="Enter your email"
                required
                data-testid="email-input"
            >
        </div>

        <!-- Password field -->
        <div class="form-group">
            <label for="password">Password</label>
            <input
                type="password"
                id="password"
                name="password"
                placeholder="Enter password"
                data-testid="password-input"
            >
        </div>

        <!-- Country dropdown -->
        <div class="form-group">
            <label for="country">Country</label>
            <select id="country" name="country" data-testid="country-select">
                <option value="">Select a country</option>
                <option value="us">United States</option>
                <option value="uk">United Kingdom</option>
                <option value="ca">Canada</option>
                <option value="au">Australia</option>
                <option value="de">Germany</option>
                <option value="fr">France</option>
            </select>
        </div>

        <!-- Message textarea -->
        <div class="form-group">
            <label for="message">Message</label>
            <textarea
                id="message"
                name="message"
                rows="4"
                placeholder="Enter your message"
                data-testid="message-textarea"
            ></textarea>
        </div>

        <!-- Newsletter checkbox -->
        <div class="form-group checkbox-group">
            <input
                type="checkbox"
                id="newsletter"
                name="newsletter"
                data-testid="newsletter-checkbox"
            >
            <label for="newsletter">Subscribe to newsletter</label>
        </div>

        <!-- Terms checkbox (required) -->
        <div class="form-group checkbox-group">
            <input
                type="checkbox"
                id="terms"
                name="terms"
                required
                data-testid="terms-checkbox"
            >
            <label for="terms">I agree to the terms and conditions</label>
        </div>

        <!-- Submit button -->
        <div class="form-group">
            <button type="submit" id="submit" data-testid="submit-button">
                Submit Form
            </button>
        </div>
    </form>

    <!-- Result display -->
    <div class="result" id="result">
        <h3 id="result-title">Form Submitted Successfully!</h3>
        <div class="result-data" id="result-data"></div>
    </div>

    <!-- Hidden fields for testing -->
    <input type="hidden" id="hidden-field" name="hidden_field" value="secret123">
    <div id="submission-count" class="hidden" data-count="0"></div>

    <script>
        const form = document.getElementById('test-form');
        const resultDiv = document.getElementById('result');
        const resultTitle = document.getElementById('result-title');
        const resultData = document.getElementById('result-data');
        const submissionCount = document.getElementById('submission-count');

        form.addEventListener('submit', function(e) {
            e.preventDefault();

            // Collect form data
            const formData = new FormData(form);
            const data = {};
            formData.forEach((value, key) => {
                data[key] = value;
            });

            // Handle checkboxes (FormData doesn't include unchecked)
            data.newsletter = document.getElementById('newsletter').checked;
            data.terms = document.getElementById('terms').checked;

            // Update submission count
            let count = parseInt(submissionCount.dataset.count || '0');
            count++;
            submissionCount.dataset.count = count.toString();
            data.submission_number = count;

            // Add timestamp
            data.timestamp = new Date().toISOString();

            // Show result
            resultDiv.classList.add('visible');
            resultDiv.classList.remove('error');
            resultTitle.textContent = 'Form Submitted Successfully!';
            resultData.textContent = JSON.stringify(data, null, 2);

            // Dispatch custom event for test verification
            window.dispatchEvent(new CustomEvent('formSubmitted', { detail: data }));
        });

        // Reset handler
        form.addEventListener('reset', function() {
            resultDiv.classList.remove('visible');
        });

        // Expose validation for testing
        window.validateForm = function() {
            return form.checkValidity();
        };

        // Expose form data getter for testing
        window.getFormData = function() {
            const formData = new FormData(form);
            const data = {};
            formData.forEach((value, key) => {
                data[key] = value;
            });
            data.newsletter = document.getElementById('newsletter').checked;
            data.terms = document.getElementById('terms').checked;
            return data;
        };
    </script>
</body>
</html>
