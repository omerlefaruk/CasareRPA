# =============================================================================
# CasareRPA Orchestrator Environment Configuration
# =============================================================================

# -----------------------------------------------------------------------------
# Database Configuration (PostgreSQL)
# -----------------------------------------------------------------------------
DB_ENABLED=true
DB_HOST=localhost
DB_PORT=5432
DB_NAME=casare_rpa
DB_USER=postgres
DB_PASSWORD=your_secure_password_here

# Connection pool settings
DB_POOL_MIN_SIZE=2
DB_POOL_MAX_SIZE=10
DB_COMMAND_TIMEOUT=60.0
DB_MAX_INACTIVE_LIFETIME=300.0

# -----------------------------------------------------------------------------
# Robot Authentication (for internet-connected robots)
# -----------------------------------------------------------------------------

# Enable robot API token authentication
# Set to 'false' for LAN deployments or development
# Set to 'true' for internet deployments (REQUIRED for security)
ROBOT_AUTH_ENABLED=false

# Robot API tokens (generated with tools/generate_robot_token.py)
# Format: ROBOT_TOKENS=robot-001:hash1,robot-002:hash2,robot-003:hash3
# IMPORTANT: Store only token HASHES here, not raw tokens
# Example:
# ROBOT_TOKENS=robot-001:a1b2c3d4...,robot-002:e5f6g7h8...
ROBOT_TOKENS=

# -----------------------------------------------------------------------------
# API Server Configuration
# -----------------------------------------------------------------------------

# API host/port
API_HOST=0.0.0.0
API_PORT=8000

# HTTPS/SSL (required for internet deployments)
# Leave empty for HTTP (development/LAN only)
SSL_KEYFILE=
SSL_CERTFILE=

# CORS allowed origins (for React dashboard)
# For production, replace with your actual dashboard domain
CORS_ORIGINS=http://localhost:5173,http://localhost:8000

# -----------------------------------------------------------------------------
# Monitoring Configuration
# -----------------------------------------------------------------------------

# Metrics collection interval (seconds)
METRICS_COLLECTION_INTERVAL=5

# Event bus history size (number of events to retain)
EVENT_HISTORY_SIZE=1000

# WebSocket send timeout (seconds)
WS_SEND_TIMEOUT=1.0

# -----------------------------------------------------------------------------
# Logging Configuration
# -----------------------------------------------------------------------------

# Log level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
LOG_LEVEL=INFO

# Log file path (leave empty for console-only logging)
LOG_FILE=logs/orchestrator.log

# Log rotation (size in MB)
LOG_ROTATION_SIZE_MB=10
LOG_RETENTION_DAYS=7

# -----------------------------------------------------------------------------
# DBOS Workflow Engine Configuration
# -----------------------------------------------------------------------------

# DBOS transaction timeout (seconds)
DBOS_TRANSACTION_TIMEOUT=300

# DBOS retry policy
DBOS_MAX_RETRIES=3
DBOS_RETRY_DELAY_MS=1000

# -----------------------------------------------------------------------------
# Security Configuration
# -----------------------------------------------------------------------------

# JWT secret key (for dashboard user authentication)
# Generate with: python -c "import secrets; print(secrets.token_hex(32))"
JWT_SECRET_KEY=change_this_to_a_secure_random_key

# JWT expiration (seconds)
JWT_EXPIRATION_SECONDS=3600

# Rate limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS_PER_MINUTE=100
