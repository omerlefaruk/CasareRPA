# CasareRPA Environment Configuration
# Copy this file to .env and customize for your environment
# All values shown are defaults - only set what you need to change

# ============================================================================
# TIMEOUT CONFIGURATION
# ============================================================================
# All timeout values can be overridden via environment variables

# HTTP/Network Timeouts
CASARE_TIMEOUT_HTTP_S=30.0                    # Default HTTP client timeout (seconds)
CASARE_TIMEOUT_WEBSOCKET_CLOSE_S=5.0          # WebSocket graceful close timeout
CASARE_TIMEOUT_WEBSOCKET_PING_S=10.0          # WebSocket ping/pong keepalive interval
CASARE_TIMEOUT_HEALTH_CHECK_S=10.0            # Health check HTTP request timeout

# Browser Automation Timeouts
CASARE_TIMEOUT_BROWSER_ELEMENT_MS=100         # Browser element wait timeout (ms)
CASARE_TIMEOUT_BROWSER_DOWNLOAD_S=600         # File download timeout (seconds)
CASARE_TIMEOUT_PAGE_LOAD_MS=30000             # Page load timeout (ms)

# Desktop Automation Timeouts
CASARE_TIMEOUT_DESKTOP_ELEMENT_S=5.0          # Desktop element wait timeout (seconds)
CASARE_TIMEOUT_SELECTOR_FIND_S=10.0           # Selector-based element find timeout

# Execution Timeouts
CASARE_TIMEOUT_EXECUTION_CLEANUP_S=30.0       # Post-execution cleanup timeout
CASARE_TIMEOUT_NODE_DEFAULT_S=30              # Default per-node execution timeout
CASARE_TIMEOUT_JOB_S=3600                     # Maximum job execution time (1 hour)

# Resource Management Timeouts
CASARE_TIMEOUT_POOL_CLOSE_S=10.0              # Connection pool close timeout
CASARE_TIMEOUT_PROCESS_TERMINATION_S=5.0      # Child process termination timeout

# AI/ML Timeouts
CASARE_TIMEOUT_AGENT_EXECUTION_S=300          # AI agent execution timeout (5 minutes)
CASARE_TIMEOUT_VISION_SEARCH_MS=10000         # Vision-based element search timeout

# UI Timeouts
CASARE_TIMEOUT_CANVAS_SIGNAL_MS=8000          # Qt canvas signal timeout

# ============================================================================
# PORT CONFIGURATION
# ============================================================================
# Service port numbers - ensure no conflicts in your environment

CASARE_PORT_ORCHESTRATOR=8000                 # Orchestrator API server
CASARE_PORT_DATABASE=5432                     # PostgreSQL database
CASARE_PORT_VAULT=8200                        # HashiCorp Vault
CASARE_PORT_VITE_DEV=5173                     # Vite development server
CASARE_PORT_REDIS=6379                        # Redis cache/message broker
CASARE_PORT_METRICS=9090                      # Prometheus metrics endpoint
CASARE_PORT_WEBSOCKET=8001                    # Dedicated WebSocket server

# Legacy port environment variables (also supported)
# ORCHESTRATOR_PORT=8000
# API_PORT=8000
# PORT=8000
# DB_PORT=5432

# ============================================================================
# RETRY CONFIGURATION
# ============================================================================
# Resilience settings for retryable operations

# Attempt Limits
CASARE_RETRY_MAX_ATTEMPTS=3                   # Default max retry attempts
CASARE_RETRY_AI_MAX_ATTEMPTS=2                # Max retries for AI/LLM operations
CASARE_RETRY_NODE_MAX_ATTEMPTS=3              # Max retries for node execution
CASARE_RETRY_WEBSOCKET_RECONNECT_MAX=10       # Max WebSocket reconnection attempts

# Backoff Timing
CASARE_RETRY_BASE_DELAY_MS=1000               # Initial retry delay (1 second)
CASARE_RETRY_MAX_DELAY_MS=30000               # Maximum retry delay (30 seconds)
CASARE_RETRY_BACKOFF_MULTIPLIER=2.0           # Exponential backoff multiplier
CASARE_RETRY_JITTER_FACTOR=0.1                # Random jitter factor (0.0-1.0)

# HTTP Retry Status Codes (comma-separated)
CASARE_RETRY_HTTP_STATUSES=429,500,502,503,504

# ============================================================================
# LIMITS CONFIGURATION
# ============================================================================
# Resource limits to protect system stability

# Workflow Limits
CASARE_LIMIT_WORKFLOW_MAX_NODES=1000          # Max nodes per workflow
CASARE_LIMIT_WORKFLOW_MAX_CONNECTIONS=5000    # Max connections per workflow
CASARE_LIMIT_WORKFLOW_MAX_DEPTH=10            # Max subworkflow nesting depth

# Content Limits
CASARE_LIMIT_HTML_MAX_LENGTH=50000            # Max HTML content to process
CASARE_LIMIT_LOG_LINE_MAX_LENGTH=10000        # Max log line length

# LLM Limits
CASARE_LIMIT_LLM_MAX_TOKENS=1000              # Default LLM response tokens
CASARE_LIMIT_LLM_CONTEXT_CHARS=3000           # Max LLM prompt context chars
CASARE_LIMIT_LLM_MAX_OUTPUT_TOKENS=4000       # Max LLM generation output

# Batch/Concurrency Limits
CASARE_LIMIT_BATCH_SIZE=100                   # Default batch operation size
CASARE_LIMIT_CONCURRENT_JOBS_PER_ROBOT=1      # Max concurrent jobs per robot

# History/Queue Limits
CASARE_LIMIT_EVENT_HISTORY_SIZE=1000          # Max events in history
CASARE_LIMIT_QUEUE_MAX_PENDING=10000          # Max pending jobs in queue

# Variable Limits
CASARE_LIMIT_VARIABLE_NAME_MAX_LENGTH=128     # Max variable name length
CASARE_LIMIT_VARIABLE_VALUE_MAX_SIZE=10485760 # Max variable value size (10 MB)

# File Limits
CASARE_LIMIT_FILE_UPLOAD_MAX_SIZE=104857600   # Max file upload size (100 MB)
CASARE_LIMIT_SCREENSHOT_MAX_SIZE=5242880      # Max screenshot size (5 MB)

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================
# PostgreSQL connection settings

DB_ENABLED=true
DATABASE_URL=                                  # Full connection URL (overrides components)
DB_HOST=localhost
DB_PORT=5432
DB_NAME=casare_rpa
DB_USER=casare_user
DB_PASSWORD=
DB_POOL_MIN_SIZE=2
DB_POOL_MAX_SIZE=10
DB_COMMAND_TIMEOUT=60.0
DB_MAX_INACTIVE_LIFETIME=300.0

# ============================================================================
# ORCHESTRATOR CONFIGURATION
# ============================================================================
# API server settings

ORCHESTRATOR_HOST=0.0.0.0
ORCHESTRATOR_PORT=8000
ORCHESTRATOR_WORKERS=1
CORS_ORIGINS=http://localhost:5173,http://localhost:8000
SSL_KEYFILE=
SSL_CERTFILE=

# ============================================================================
# ROBOT CONFIGURATION
# ============================================================================
# Robot agent settings

ROBOT_ID=                                      # Auto-generated if not set
ROBOT_NAME=
ROBOT_ENVIRONMENT=production
ROBOT_MAX_CONCURRENT_JOBS=1
ROBOT_HEARTBEAT_INTERVAL=30
ROBOT_CAPABILITIES=                            # Comma-separated capabilities
ROBOT_TAGS=                                    # Comma-separated tags
RECONNECT_DELAY=1.0
MAX_RECONNECT_DELAY=60.0
CASARE_JOB_TIMEOUT=3600.0

# ============================================================================
# SECURITY CONFIGURATION
# ============================================================================
# Authentication and encryption settings

API_SECRET=                                    # JWT signing secret (required for auth)
JWT_EXPIRATION_SECONDS=3600
ROBOT_AUTH_ENABLED=false
VERIFY_SSL=true

# mTLS Configuration (all three required if using mTLS)
CASARE_CA_CERT_PATH=
CASARE_CLIENT_CERT_PATH=
CASARE_CLIENT_KEY_PATH=

# ============================================================================
# SUPABASE CONFIGURATION (Optional)
# ============================================================================
# Cloud database integration

SUPABASE_URL=
SUPABASE_KEY=
SUPABASE_SERVICE_KEY=

# ============================================================================
# VAULT CONFIGURATION (Optional)
# ============================================================================
# HashiCorp Vault integration

VAULT_ADDR=
VAULT_TOKEN=
VAULT_ROLE_ID=
VAULT_SECRET_ID=

# ============================================================================
# CLOUDFLARE CONFIGURATION (Optional)
# ============================================================================
# Tunnel and external access

CASARE_API_URL=
CASARE_WEBHOOK_URL=
CASARE_ROBOT_WS_URL=

# ============================================================================
# LOGGING CONFIGURATION
# ============================================================================
# Log output settings

LOG_LEVEL=INFO                                 # DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_FILE=                                      # Optional log file path
LOG_ROTATION_SIZE_MB=10
LOG_RETENTION_DAYS=7

# ============================================================================
# QUEUE CONFIGURATION
# ============================================================================
# Job queue settings

PGQUEUER_DB_URL=                               # Queue database URL
USE_MEMORY_QUEUE=false                         # Use in-memory queue (dev only)
JOB_POLL_INTERVAL=1.0
JOB_TIMEOUT_DEFAULT=3600

# ============================================================================
# METRICS CONFIGURATION
# ============================================================================
# Observability settings

METRICS_ENABLED=true
METRICS_COLLECTION_INTERVAL=5
EVENT_HISTORY_SIZE=1000

# ============================================================================
# RATE LIMITING
# ============================================================================
# API rate limiting

RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS_PER_MINUTE=100

# ============================================================================
# DEVELOPMENT FLAGS
# ============================================================================
# Development-only settings

DEBUG=false
RELOAD=false
TENANT_ID=

# Canvas UI (v2) + dev hot-reload helpers
CASARE_UI_V2=1
# Show dev actions in the v2 toolbar (Reload UI / Restart)
CASARE_DEV_TOOLS=0
# modes: styles (reapply v2 stylesheet) | restart (restart app)
CASARE_DEV_AUTO_RELOAD=
CASARE_DEV_AUTO_RELOAD_DEBOUNCE_MS=250

# ============================================================================
# MCP SERVER CONFIGURATION
# ============================================================================
# API keys for Model Context Protocol servers

# Exa Search MCP Server
# Get your API key from: https://exa.ai/
EXA_API_KEY=

# Context7 MCP Server (also used by 'ref' server)
# Get your API key from: https://context7.io/
CONTEXT7_API_KEY=
