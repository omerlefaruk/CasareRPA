# ============================================================================
# CasareRPA Configuration Template
# ============================================================================
# Copy this file to .env and fill in your values.
# NEVER commit .env to version control!
#
# Configuration Loading Order:
# 1. Environment variables (highest priority)
# 2. .env file in current directory
# 3. config/.env file
# 4. Default values (lowest priority)
# ============================================================================

# ============================================================================
# REQUIRED - Core Settings
# ============================================================================

# Database connection (PostgreSQL)
# Format: postgresql://user:password@host:port/database
DATABASE_URL=postgresql://casare_user:your_password_here@localhost:5432/casare_rpa

# OR use individual components (if DATABASE_URL not set):
# DB_HOST=localhost
# DB_PORT=5432
# DB_NAME=casare_rpa
# DB_USER=casare_user
# DB_PASSWORD=your_password_here

# ============================================================================
# OPTIONAL - Supabase (Cloud Sync)
# ============================================================================
# Get from: https://supabase.com/dashboard/project/<project>/settings/api

# Project URL
SUPABASE_URL=

# Anonymous key (safe for client-side, used by robots)
SUPABASE_KEY=

# Service role key (KEEP SECRET - server-side only)
# SUPABASE_SERVICE_KEY=

# ============================================================================
# OPTIONAL - Security
# ============================================================================

# JWT secret for API authentication
# Generate with: python -c "import secrets; print(secrets.token_hex(32))"
API_SECRET=

# JWT token expiration (seconds, default: 3600 = 1 hour)
JWT_EXPIRATION_SECONDS=3600

# Enable robot API key authentication (required for internet deployments)
ROBOT_AUTH_ENABLED=false

# ============================================================================
# ORCHESTRATOR CONFIGURATION
# ============================================================================

# API server binding
ORCHESTRATOR_HOST=0.0.0.0
ORCHESTRATOR_PORT=8000

# Number of uvicorn workers (1 recommended for WebSocket services)
ORCHESTRATOR_WORKERS=1

# CORS allowed origins (comma-separated)
# Development: http://localhost:5173,http://localhost:8000
# Production: https://your-domain.com
CORS_ORIGINS=http://localhost:5173,http://localhost:8000

# ============================================================================
# ROBOT CONFIGURATION
# ============================================================================

# Robot identifier (auto-generated if not set)
ROBOT_ID=

# Robot display name (defaults to hostname)
ROBOT_NAME=

# Environment for job filtering (production, staging, development)
ROBOT_ENVIRONMENT=production

# Maximum concurrent jobs per robot
ROBOT_MAX_CONCURRENT_JOBS=1

# Heartbeat interval (seconds)
ROBOT_HEARTBEAT_INTERVAL=30

# Robot capabilities (comma-separated: browser, desktop, gpu, high_memory)
# ROBOT_CAPABILITIES=browser,desktop

# Robot tags for filtering (comma-separated)
# ROBOT_TAGS=windows,on-premise

# ============================================================================
# DATABASE CONNECTION POOL
# ============================================================================

# Enable database (false = in-memory fallback for development)
DB_ENABLED=true

# Connection pool settings
DB_POOL_MIN_SIZE=2
DB_POOL_MAX_SIZE=10
DB_COMMAND_TIMEOUT=60.0
DB_MAX_INACTIVE_LIFETIME=300.0

# ============================================================================
# JOB QUEUE (PgQueuer)
# ============================================================================

# Full PostgreSQL URL for PgQueuer (defaults to DATABASE_URL)
# PGQUEUER_DB_URL=postgresql://user:pass@host:port/db

# Use in-memory queue (development only - jobs lost on restart)
USE_MEMORY_QUEUE=false

# Job polling interval (seconds)
JOB_POLL_INTERVAL=1.0

# Default job timeout (seconds, default: 3600 = 1 hour)
JOB_TIMEOUT_DEFAULT=3600

# ============================================================================
# LOGGING & MONITORING
# ============================================================================

# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# Log file path (empty = console only)
# LOG_FILE=logs/casare.log

# Log rotation settings
LOG_ROTATION_SIZE_MB=10
LOG_RETENTION_DAYS=7

# Enable metrics collection
METRICS_ENABLED=true

# Metrics collection interval (seconds)
METRICS_COLLECTION_INTERVAL=5

# ============================================================================
# TIMEOUTS & INTERVALS
# ============================================================================

# Robot heartbeat timeout - disconnect if no heartbeat (seconds)
ROBOT_HEARTBEAT_TIMEOUT=90

# WebSocket ping interval (seconds)
WS_PING_INTERVAL=30

# WebSocket send timeout (seconds)
WS_SEND_TIMEOUT=1.0

# ============================================================================
# RATE LIMITING
# ============================================================================

# Enable rate limiting
RATE_LIMIT_ENABLED=true

# Requests per minute limit
RATE_LIMIT_REQUESTS_PER_MINUTE=100

# ============================================================================
# OPTIONAL - HashiCorp Vault (Credential Management)
# ============================================================================

# Vault server address
# VAULT_ADDR=http://127.0.0.1:8200

# Vault authentication (Token method)
# VAULT_TOKEN=your-vault-token

# Vault authentication (AppRole method)
# VAULT_ROLE_ID=your-role-id
# VAULT_SECRET_ID=your-secret-id

# ============================================================================
# OPTIONAL - Redis (High-Scale Queue)
# ============================================================================

# Redis URL for high-scale deployments
# REDIS_URL=redis://localhost:6379

# ============================================================================
# OPTIONAL - Cloudflare Tunnel (Internet Access)
# ============================================================================
# These URLs are used when accessing CasareRPA over the internet

# FastAPI API URL
# CASARE_API_URL=https://api.casare.net

# Webhook receiver URL
# CASARE_WEBHOOK_URL=https://webhooks.casare.net

# Robot WebSocket URL
# CASARE_ROBOT_WS_URL=wss://robots.casare.net

# ============================================================================
# OPTIONAL - SSL/TLS (Production)
# ============================================================================

# SSL certificate and key files (required for HTTPS)
# SSL_KEYFILE=/path/to/privkey.pem
# SSL_CERTFILE=/path/to/fullchain.pem

# Verify SSL certificates (disable for self-signed in dev)
VERIFY_SSL=true

# ============================================================================
# OPTIONAL - mTLS (Mutual TLS for Robots)
# ============================================================================

# CA certificate path
# CASARE_CA_CERT_PATH=/path/to/ca.pem

# Client certificate path
# CASARE_CLIENT_CERT_PATH=/path/to/client-cert.pem

# Client key path
# CASARE_CLIENT_KEY_PATH=/path/to/client-key.pem

# ============================================================================
# DEVELOPMENT SETTINGS
# ============================================================================

# Enable debug mode (verbose logging, auto-reload)
DEBUG=false

# Enable hot-reload for development
RELOAD=false

# ============================================================================
# MULTI-TENANT SETTINGS
# ============================================================================

# Default tenant UUID (for single-tenant deployments)
# TENANT_ID=00000000-0000-0000-0000-000000000000

# ============================================================================
# WORKFLOW STORAGE
# ============================================================================

# Directory for workflow JSON backups
WORKFLOWS_DIR=./workflows

# Enable filesystem backup alongside database storage
WORKFLOW_BACKUP_ENABLED=true
